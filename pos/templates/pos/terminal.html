{% extends "base.html" %}
{% load staticfiles %}
{% load i18n %}

{% block head %}
{% comment %} translation {% endcomment %}
<script type="text/javascript" src="{% url 'django.views.i18n.javascript_catalog' %}"></script>

{% comment %} the terminal {% endcomment %}
<link type="text/css" rel="stylesheet" href="{% static 'terminal-layout.css' %}" />
<link type="text/css" rel="stylesheet" href="{% static 'widgets.css' %}" />

{% comment %} keyboard {% endcomment %}
<link href="{% static 'keyboard/css/keyboard.css' %}" rel="stylesheet">
<script src="{% static 'keyboard/js/jquery.keyboard.js' %}"></script>

<!-- keyboard extensions (optional) -->
<script src="{% static 'keyboard/js/jquery.mousewheel.js' %}"></script>
<script src="{% static 'keyboard/js/jquery.keyboard.extension-typing.js' %}"></script>
<script src="{% static 'keyboard/js/jquery.keyboard.extension-autocomplete.js' %}"></script>

{% comment %} custom widgets {% endcomment %}
<script src="{% static 'widgets.js' %}"></script>
{% comment %} 'embedded' javascript {% endcomment %}
<script type="text/javascript">
$(document).ready(function() {
	{% comment %} data from view, stored in json {% endcomment %}
	window.data = {% autoescape off %}{{data}}{% endautoescape %};
	window.data.spacer = "{% static 'spacer.png' %}"; // {% comment %} stuff that javascript can't see {% endcomment %}
	window.data.csrf_token = "{{csrf_token}}";
	// ui settings
	window.data.t = 50; // duration of show/hide events
	window.data.t_easing = 200; // duration of easing functions (drag start/stop)
	window.data.last_search = ""; // last searched query
	window.data.search_update_interval = 1000; // checking if search query has changed
	
	window.items = {
    	focused_item:null, // will be assigned a jquery element as soon as a key is pressed/mouse clicked
    	search_field:$("input#search_products_filter"),
    	products_list:$("div#products")
	}
	
	/* widgets */
	categories_selector($("div#selection #categories"), window.data['categories'], 0, null); // categories selector (level 0 is the topmost category)
	products_selector($("div#products"));
	
	/* handle the keyboard */
	$(document).keypress(handle_keypress);
	
});  
</script>

{% endblock %}

{% block content %}

{% comment %} management, logout, ... links {% endcomment %}
<div id="manage_bar">
    <div id="blocklogic"><a href="http://www.blocklogic.net">BlockLogic</a></div>
    <div class="management-bar-button"><a href="{% url 'pos:manage_home' company.url_name %}">{% trans 'Manage' %}</a></div>
    <div class="management-bar-button"><a href="#">{% trans 'Logout' %}</a></div>
    <div id="messages">messages</div> {% comment %} actually in center, but with overflow:hidden {% endcomment %}
</div>

{% comment %} the bill {% endcomment %}
<div id="bill">bill</div>

{% comment %} product selector and other controls {% endcomment %}
<div id="selection">
    <div id="categories"></div>
    <div id="products_scroll_outer">
        <div id="products_scroll_inner">
            <div id="products"></div>
        </div>
    </div>
    <div>
        <input type="text" id="search_products_filter" /><input type="button" id="search_products_submit" value="search" onclick="get_products()" />
    </div>
    <div id="controls">
    </div>
</div>

{% endblock %}

